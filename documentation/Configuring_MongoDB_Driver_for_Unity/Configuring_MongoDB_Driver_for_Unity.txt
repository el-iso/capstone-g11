Installing MongoDB Driver for C# (Windows)
Zachary Roth & Derek Paschal
Created : Jan. 25, 2018
Updated : Feb. 5, 2018

Prerequisites:
==================
MongoDB
Unity


A challenge with the default Unity setup is the default .NET/Mono framework projects target. The default version is .NET 3.5 (as of Jan. 2018), and while stable it can be challenging to find compatible external libraries without significant effort/recompiling.

To install the MongoDB driver for C#, Unity should first be set to use an updated version of .NET:

1) Open a new Unity project
2) Create a 3D object and a script, and attach the script to the 3D GameObject. This will ensure that Unity creates a C# Project to manage your scripts.
3) Save the Scene and Project.
4) Open the Unity "Player Settings" (Edit -> Project Settings -> Player)
5) An Inspector window will open on the right. Look for the Scripting Runtime Version and change the setting from "Stable ().NET 3.5 Equivalent)" to "Experimental (.NET 4.6 Equivalent)" This is under the Other Settings heading and the Configuration sub-heading
6) In the _Unity_Global folder in unity_toolbox, use the "SymlinkCreator.bat" script and the included "readme.txt" to link the "MongoDB_C#_Driver" directory to your Unity Project Assets folder. This will allow the Unity compiler to find the MongoDB references in C# Scripts.

7) If you have not done so previously, create a C# class to test the driver. In the import/include statements at the top of the file, add the following statements:	using MongoDB.Driver;
																																									using MongoDB.Bson;


A test class is at the bottom of this file to test the connection with a hardcoded search to MongoDB.
//---------------------------------------------------------





//Test Class for MongoDB-C# Driver. Copy and paste this or write your own.
using MongoDB.Driver;
using MongoDB.Bson;
using UnityEngine;

public class ConnectionTest : MonoBehaviour {

	// Use this for initialization
	void Start () {
        DBTest();
	}

	// Update is called once per frame
	void Update () {

	}

    void DBTest()
    {
        // Connect directly to a single MongoDB server
        var client = new MongoClient("mongodb://localhost:27017");

        // Get DB and collection
        var database = client.GetDatabase("UnityTestDB");
        var collection = database.GetCollection<BsonDocument>("testCubeMovement");

        // Set document filter (find document with given field-value pair)
        var filter = Builders<BsonDocument>.Filter.Eq("role", "test2");
        var sort = Builders<BsonDocument>.Sort.Descending("role");

        // Set projection
        var projection = Builders<BsonDocument>.Projection.Exclude("_id");

        // Search for document with given parameters
        var document = collection.Find(new BsonDocument()).Project(projection).First();

        // Print the retrieved document to the Unity debug console
        Debug.Log(document.ToString());
    }
}
